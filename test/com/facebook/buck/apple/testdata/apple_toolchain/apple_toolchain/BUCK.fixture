apple_toolchain_set(
    name = "toolchain",
    apple_toolchains = [
        ":platform1",
        ":platform2",
    ],
    visibility = ["PUBLIC"],
)

apple_toolchain(
    name = "platform1",
    architecture = "arm64",
    platform_path = "Developer/iPhoneOS.platform",
    sdk_path = "//apple_toolchain/tools:gen-sdk",
    sdk_name = "iphoneos",
    version = "13.2",
    build_version = "17B102",
    min_version = "13.2",
    actool = "//tools:unimplemented",
    ibtool = "//tools:unimplemented",
    momc = "//apple_toolchain/tools:momc",
    xctest = "//tools:unimplemented",
    dsymutil = "//apple_toolchain/tools:dsymutil",
    libtool = "//tools:unimplemented",
    lipo = "//apple_toolchain/tools:lipo",
    lldb = "//apple_toolchain/tools:lldb",
    copy_scene_kit_assets = "//tools:unimplemented",
    codesign = "//apple_toolchain/tools:codesign",
    codesign_allocate = "//tools:unimplemented",
    cxx_toolchain = ":cxx_toolchain",
    developer_path = "Developer",
    xcode_version = "1130",
    xcode_build_version = "11C29",
    visibility = ["PUBLIC"],
)

apple_toolchain(
    name = "platform2",
    architecture = "armv7",
    platform_path = "Developer/iPhoneOS.platform",
    sdk_path = "Developer/iPhoneOS.platform/iPhoneOS.sdk",
    sdk_name = "iphoneos",
    version = "13.2",
    build_version = "17B102",
    min_version = "13.2",
    actool = "//tools:unimplemented",
    ibtool = "//tools:unimplemented",
    momc = "//apple_toolchain/tools:momc",
    xctest = "//tools:unimplemented",
    dsymutil = "//apple_toolchain/tools:dsymutil",
    libtool = "//tools:unimplemented",
    lipo = "//apple_toolchain/tools:lipo",
    lldb = "//apple_toolchain/tools:lldb",
    copy_scene_kit_assets = "//tools:unimplemented",
    codesign = "//apple_toolchain/tools:codesign",
    codesign_allocate = "//tools:unimplemented",
    cxx_toolchain = ":cxx_toolchain",
    developer_path = "Developer",
    xcode_version = "1130",
    xcode_build_version = "11C29",
    visibility = ["PUBLIC"],
)

apple_toolchain_set(
    name = "toolchain_dsymutil",
    apple_toolchains = [":platform_dsymutil"],
    visibility = ["PUBLIC"],
)

apple_toolchain(
    name = "platform_dsymutil",
    architecture = "arm64",
    platform_path = "Developer/iPhoneOS.platform",
    sdk_path = "Developer/iPhoneOS.platform/iPhoneOS.sdk",
    sdk_name = "iphoneos",
    version = "13.2",
    build_version = "17B102",
    min_version = "13.2",
    actool = "//tools:unimplemented",
    ibtool = "//tools:unimplemented",
    momc = "//apple_toolchain/tools:momc",
    xctest = "//tools:unimplemented",
    dsymutil = "//apple_toolchain/tools:dsymutil_workaround",
    libtool = "//tools:unimplemented",
    lipo = "//apple_toolchain/tools:lipo",
    lldb = "//apple_toolchain/tools:lldb",
    copy_scene_kit_assets = "//tools:unimplemented",
    codesign = "//apple_toolchain/tools:codesign",
    codesign_allocate = "//tools:unimplemented",
    cxx_toolchain = ":cxx_toolchain",
    work_around_dsymutil_lto_stack_overflow_bug = True,
    developer_path = "Developer",
    xcode_version = "1130",
    xcode_build_version = "11C29",
    visibility = ["PUBLIC"],
)

apple_toolchain_set(
    name = "toolchain_swift",
    apple_toolchains = [":platform_swift"],
    visibility = ["PUBLIC"],
)

apple_toolchain(
    name = "platform_swift",
    architecture = "arm64",
    platform_path = "Developer/iPhoneOS.platform",
    sdk_path = "Developer/iPhoneOS.platform/iPhoneOS.sdk",
    sdk_name = "iphoneos",
    version = "13.2",
    build_version = "17B102",
    min_version = "13.2",
    actool = "//tools:unimplemented",
    ibtool = "//tools:unimplemented",
    momc = "//apple_toolchain/tools:momc",
    xctest = "//tools:unimplemented",
    dsymutil = "//apple_toolchain/tools:dsymutil_workaround",
    libtool = "//tools:unimplemented",
    lipo = "//apple_toolchain/tools:lipo",
    lldb = "//apple_toolchain/tools:lldb",
    copy_scene_kit_assets = "//tools:unimplemented",
    codesign = "//apple_toolchain/tools:codesign",
    codesign_allocate = "//tools:unimplemented",
    cxx_toolchain = ":cxx_toolchain",
    swift_toolchain = ":swift_toolchain",
    xcode_version = "1130",
    xcode_build_version = "11C29",
    visibility = ["PUBLIC"],
)

swift_toolchain(
    name = "swift_toolchain",
    platform_path = "Developer/iPhoneOS.platform",
    sdk_path = "//apple_toolchain/tools:gen-sdk",
    resource_dir = "//apple_toolchain/tools:gen-resource-dir",
    swiftc = "//apple_toolchain/tools:swiftc",
    swiftc_flags = [
        "-test-arg1",
        "-test-arg2",
        "-sdk",
        "$(location //apple_toolchain/tools:gen-sdk)",
    ],
    runtime_paths_for_bundling = [
        "/test/bundling",
        "@executable_path/bundling",
        "@loader_path/bundling",
    ],
    runtime_paths_for_linking = [
        "/test/linking",
        "@executable_path/linking",
        "@loader_path/linking",
    ],
    static_runtime_paths = [
        "/test/static_runtime",
        "@executable_path/static_runtime",
        "@loader_path/static_runtime",
    ],
    runtime_run_paths = [
        "/test/runtime_run",
        "@executable_path/runtime_run",
        "@loader_path/runtime_run",
    ],
    prefix_serialized_debug_info = True,
)

cxx_toolchain(
    name = "cxx_toolchain",
    archiver_type = "bsd",
    compiler_type = "clang",
    linker_type = "gnu",
    shared_library_interface_type = "enabled",
    object_file_extension = "object",
    static_library_extension = "static",
    shared_library_extension = "so",
    shared_library_versioned_extension_format = "%s.shared",
    use_header_map = True,
    archiver = "//tools:archiver",
    assembler = "//tools:unimplemented",
    c_compiler = "//apple_toolchain/tools:apple_compiler",
    c_compiler_flags = [
        "-test-flag",
        "$SDKROOT/testfile",
    ],
    cxx_compiler = "//apple_toolchain/tools:apple_compiler",
    linker = "//apple_toolchain/tools:apple_linker",
    linker_flags = [
        "-test-flag",
        "$SDKROOT/testfile",
    ],
    nm = "//tools:unimplemented",
    objcopy_for_shared_library_interface = "//tools:unimplemented",
    ranlib = "//tools:ranlib",
    strip = "//apple_toolchain/tools:strip",
    strip_non_global_flags = ["-x", "-T"],
    strip_all_flags = ["-r", "-u", "-T"],
    visibility = ["PUBLIC"],
)
